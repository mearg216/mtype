<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset-"UTF-8">
    <meta name="viewport" content="width=device-width, initial -scale=1.e">
    <title>Mtype</title>
    <style>
      body{
        font-family: monospace;
        color: white;
        background-color: black;
      }
      .heading{
        margin: 10px;
      }
      .mtype{
        color: dodgerblue;
      }
      .main-printer{
        font-size: 20px;
        background-color: rgba(32, 32, 32, 1);
      }
      .printer{
        font-family: monospace;
      }
      .back-text{
        font-family: monospace;
        color:gray;
      }
      .mistake{
        color: red;
      }
      .sp-mistake{
        background-color: red;
      }
    </style>
  </head>
  <body>
    <h1 class="heading">welcome to <span class="mtype">áˆ›Type</span></h1>
    <p class="texa">Lorem ipsum dolor sit, amet consectetur adipisicing elit. obcaecati ea molestiae neque tenetur, on</p>
    <p class="main-printer"><span class="printer"></span><span class="back-text"></span></p>
    
    
    <script> 
      
      const body = document.querySelector('body');
      const heading = document.querySelector('.heading');
      
      const texa = document.querySelector('.texa');
      const mainPrinter = document.querySelector('.main-printer');
      const printer = document.querySelector('.printer');
      //const colors = ['red', 'black', 'yellow', 'blue', 'green', 'purple'];
      
      let arr = texa.innerHTML.split("");
      let index = 0;
      let addedTexa = "";
      let addedTexArr = [];
      let backArr = texa.innerHTML.split("");
      let backbench = [];
      
      document.querySelector('.back-text').innerHTML = texa.innerHTML;
      
      body.addEventListener('keydown', event => {
        if(event.key != 'Control' && event.key != 'Shift' && event.key != 'Backspace'){
          if(event.key !== arr[index]){
            if(arr[index] == " "){
              addedTexa = `<span class="sp-mistake">&nbsp;</span>`;
              printer.innerHTML += addedTexa;
            } 
            else{
              addedTexa = `<span class="mistake">${arr[index]}</span>`;
              printer.innerHTML += addedTexa;
            }
          } 
          else{
            printer.innerHTML += event.key;
            addedTexa = event.key;
          }
          index++;
          addedTexArr.push(addedTexa.length);
          
          backbench.push(backArr[0]);
          backArr.splice(0, 1);
          let backText = backArr.join("");
          mainPrinter.innerHTML = `<span class="printer">${printer.innerHTML}</span><span class="back-text">${backText}</span>`;
        }
        
        if(event.key == 'Backspace'){
          let addedTexlen = addedTexArr[addedTexArr.length-1];
          printer.innerHTML = printer.innerHTML.slice(0, printer.innerHTML.length-addedTexlen);
          index--;
          addedTexArr.pop();
          
          
          let backElem = backbench.length-1;
          backArr.unshift(backbench[backElem]);
          console.log(backbench[backElem]);
          backbench.pop();
          let backText = backArr.join("");
          mainPrinter.innerHTML = `<span class="printer">${printer.innerHTML}</span><span class="back-text">${backText}</span>`;
        }
        
        /*
        let ran1 = Math.round(Math.random()*5);
        let ran2 = Math.round(Math.random()*5);
        while (ran2 == ran1){
          ran2 = Math.round(Math.random()*5);
        }
        heading.style.color = colors[ran1];
        texa.style.color = colors[ran2];
        console.log(ran1);
        console.log(ran2);
        console.log(arr);
        */
        console.log(event.key);
      });
      
      
    </script>
  </body>
</html>